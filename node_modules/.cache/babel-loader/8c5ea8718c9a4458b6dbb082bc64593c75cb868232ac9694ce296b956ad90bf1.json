{"ast":null,"code":"var _jsxFileName = \"/home/ndohw/dev/Coursework/Capstone/src/components/Cart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Cart(_ref) {\n  _s();\n  let {\n    setCartItems\n  } = _ref;\n  const [cart, setCart] = useState(null);\n  const [itemQuantities, setItemQuantities] = useState({});\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        const response = await fetch(\"https://fakestoreapi.com/carts/5\");\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        const data = await response.json();\n        setCart(data);\n        setCartItems([...cartItems, ...(cart === null || cart === void 0 ? void 0 : cart.products)]);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchCart();\n  });\n\n  // const  = ({ cart, handleRemoveFromCart, totalValue, user, updateTotal}) => {\n  // Initializing itemQuantities state with beginning cart item quantities\n\n  const calculateTotalValue = () => {\n    // Calculate the total value based on the current cart items and quantities\n    return cart.reduce((total, item) => total + item.price * (item.quantity || 0), 0);\n  };\n  useEffect(() => {\n    //object with initial quantities based on the items in the cart\n    const initialQuantities = cart.reduce((quantities, item) => {\n      quantities[item.id] = 1;\n      return quantities;\n    }, {});\n    setItemQuantities(initialQuantities);\n  }, [cart]);\n\n  //Add to cart\n  const handleAddToCart = itemId => {\n    setItemQuantities(prevQuantities => ({\n      ...prevQuantities,\n      [itemId]: (prevQuantities[itemId] || 0) + 1\n    }));\n    updateTotal();\n  };\n  //Remove from cart\n  const handleDecreaseQuantity = itemId => {\n    if (itemQuantities[itemId] > 0) {\n      setItemQuantities(prevQuantities => ({\n        ...prevQuantities,\n        [itemId]: prevQuantities[itemId] - 1\n      }));\n      updateTotal();\n    }\n  };\n  const calculateItemTotal = itemId => {\n    var _cart$find;\n    const quantity = itemQuantities[itemId] || 0;\n    return quantity * ((_cart$find = cart.find(item => item.id === itemId)) === null || _cart$find === void 0 ? void 0 : _cart$find.price) || 0;\n  };\n\n  //if user isn't logged in prompt them to login to see their cart\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-container\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Please \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \" log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 18\n        }, this), \" to view your cart.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n  const cartItems = cart.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-item-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: item.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"$\", item.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Quantity: \", itemQuantities[item.id] || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Total: $\", calculateItemTotal(item.id).toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: item.image,\n        width: \"100\",\n        height: \"200\",\n        alt: item.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quantity-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleDecreaseQuantity(item.id),\n        children: \" - \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAddToCart(item.id),\n        children: \" + \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleRemoveFromCart(item.id),\n      className: \"remove-button\",\n      children: \"Remove\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, item.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this));\n\n  //cart items + total amount\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Shopping Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-items\",\n      children: cartItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Total Value: $\", calculateTotalValue().toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/checkout\",\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"xDkLBdCTnh4V7LeEvUAvy8dcka8=\");\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","useState","Link","Cart","setCartItems","cart","setCart","itemQuantities","setItemQuantities","fetchCart","response","fetch","ok","Error","data","json","cartItems","products","error","console","log","calculateTotalValue","reduce","total","item","price","quantity","initialQuantities","quantities","id","handleAddToCart","itemId","prevQuantities","updateTotal","handleDecreaseQuantity","calculateItemTotal","find","user","map","title","toFixed","image","handleRemoveFromCart"],"sources":["/home/ndohw/dev/Coursework/Capstone/src/components/Cart.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Cart({ setCartItems }) {\n  const [cart, setCart] = useState(null);\n  const [itemQuantities, setItemQuantities] = useState({});\n\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        const response = await fetch(\"https://fakestoreapi.com/carts/5\");\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        const data = await response.json();\n        setCart(data);\n        setCartItems([...cartItems, ...cart?.products]);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchCart();\n  });\n\n  // const  = ({ cart, handleRemoveFromCart, totalValue, user, updateTotal}) => {\n  // Initializing itemQuantities state with beginning cart item quantities\n\n  const calculateTotalValue = () => {\n    // Calculate the total value based on the current cart items and quantities\n    return cart.reduce(\n      (total, item) => total + item.price * (item.quantity || 0),\n      0,\n    );\n  };\n\n  useEffect(() => {\n    //object with initial quantities based on the items in the cart\n    const initialQuantities = cart.reduce((quantities, item) => {\n      quantities[item.id] = 1;\n      return quantities;\n    }, {});\n\n    setItemQuantities(initialQuantities);\n  }, [cart]);\n\n  //Add to cart\n  const handleAddToCart = (itemId) => {\n    setItemQuantities((prevQuantities) => ({\n      ...prevQuantities,\n      [itemId]: (prevQuantities[itemId] || 0) + 1,\n    }));\n    updateTotal();\n  };\n  //Remove from cart\n  const handleDecreaseQuantity = (itemId) => {\n    if (itemQuantities[itemId] > 0) {\n      setItemQuantities((prevQuantities) => ({\n        ...prevQuantities,\n        [itemId]: prevQuantities[itemId] - 1,\n      }));\n      updateTotal();\n    }\n  };\n\n  const calculateItemTotal = (itemId) => {\n    const quantity = itemQuantities[itemId] || 0;\n    return quantity * cart.find((item) => item.id === itemId)?.price || 0;\n  };\n\n  //if user isn't logged in prompt them to login to see their cart\n  if (!user) {\n    return (\n      <div className=\"cart-container\">\n        <p>\n          Please <Link to=\"/login\"> log in</Link> to view your cart.\n        </p>\n      </div>\n    );\n  }\n\n  const cartItems = cart.map((item) => (\n    <div key={item.id} className=\"cart-item\">\n      <div className=\"cart-item-details\">\n        <h3>{item.title}</h3>\n        <p>${item.price}</p>\n        <p>Quantity: {itemQuantities[item.id] || 0}</p>\n        <p>Total: ${calculateItemTotal(item.id).toFixed(2)}</p>\n        <img src={item.image} width=\"100\" height=\"200\" alt={item.title} />\n      </div>\n      <div className=\"quantity-controls\">\n        <button onClick={() => handleDecreaseQuantity(item.id)}> - </button>\n        <button onClick={() => handleAddToCart(item.id)}> + </button>\n      </div>\n      <button\n        onClick={() => handleRemoveFromCart(item.id)}\n        className=\"remove-button\"\n      >\n        Remove\n      </button>\n    </div>\n  ));\n\n  //cart items + total amount\n  return (\n    <div className=\"cart-container\">\n      <h2>Shopping Cart</h2>\n      <div className=\"cart-items\">{cartItems}</div>\n      <p>Total Value: ${calculateTotalValue().toFixed(2)}</p>\n      <Link to=\"/checkout\">Checkout</Link>\n    </div>\n  );\n}\n\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}